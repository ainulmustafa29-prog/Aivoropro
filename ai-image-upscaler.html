<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI Image Upscaler - Enhance image resolution with AI (2x, 4x, 8x). Free online tool to upscale images without quality loss.">
    <title>AI Image Upscaler - 2x, 4x, 8x Upscaling | AIVOROPRO</title>
    <link rel="icon" type="image/png" href="https://flexible-jade-j2fhsqcxkf.edgeone.app/icon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="container my-5">
        <div class="tool-container">
            <h1 class="mb-4">AI Image Upscaler</h1>
            <p class="lead text-muted">Enhance your image resolution with AI-powered upscaling. Choose from 2x, 4x, or 8x upscaling options.</p>
            
            <div class="upload-area" id="uploadArea">
                <i class="bi bi-cloud-upload display-1 text-primary mb-3"></i>
                <h4>Drag & Drop your image here</h4>
                <p class="text-muted">or</p>
                <input type="file" id="fileInput" accept="image/*" style="display: none;">
                <button class="btn btn-primary btn-lg" onclick="document.getElementById('fileInput').click()">Choose File</button>
                <p class="text-muted mt-3 small">Supports: JPG, PNG, WEBP, GIF (Max 10MB)</p>
            </div>

            <div id="previewSection" style="display: none;" class="mt-4">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <h5>Original Image</h5>
                        <img id="preview" class="img-fluid rounded shadow" alt="Preview">
                    </div>
                    <div class="col-md-6 mb-3">
                        <h5>Upscaled Image</h5>
                        <div id="resultContainer">
                            <div class="spinner"></div>
                            <p class="text-muted">Processing...</p>
                        </div>
                    </div>
                </div>
                <div class="mt-3">
                    <label class="form-label">Upscale Factor:</label>
                    <select class="form-select" id="upscaleFactor">
                        <option value="2">2x Upscale</option>
                        <option value="4" selected>4x Upscale</option>
                        <option value="8">8x Upscale</option>
                    </select>
                </div>
                <button class="btn btn-primary btn-lg mt-3" id="processBtn">Upscale Image</button>
                <a href="#" id="downloadBtn" class="btn btn-success btn-lg mt-3 ms-2 download-btn" style="display: none;">Download Upscaled Image</a>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <script>
        let currentFile = null;
        
        document.getElementById('fileInput').addEventListener('change', function(e) {
            handleFile(e.target.files[0]);
        });

        setupDragAndDrop('uploadArea', 'preview', function(file) {
            handleFile(file);
        });

        function handleFile(file) {
            if (!file || !file.type.startsWith('image/')) {
                alert('Please select a valid image file.');
                return;
            }
            currentFile = file;
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('preview').src = e.target.result;
                document.getElementById('previewSection').style.display = 'block';
                document.getElementById('resultContainer').innerHTML = '<p class="text-muted">Click "Upscale Image" to process</p>';
            };
            reader.readAsDataURL(file);
        }

        document.getElementById('processBtn').addEventListener('click', function() {
            if (!currentFile) return;
            
            const resolution = document.getElementById('upscaleFactor').value;
            const btn = this;
            btn.disabled = true;
            btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Processing...';
            
            // Define target resolutions
            const targetResolutions = {
                'hd': { width: 1280, height: 720 },
                'fullhd': { width: 1920, height: 1080 },
                '2k': { width: 2560, height: 1440 },
                '4k': { width: 3840, height: 2160 }
            };
            
            setTimeout(() => {
                const canvas = document.createElement('canvas');
                const img = document.getElementById('preview');
                const ctx = canvas.getContext('2d');
                
                const targetRes = targetResolutions[resolution];
                const imgAspect = img.naturalWidth / img.naturalHeight;
                const targetAspect = targetRes.width / targetRes.height;
                
                let newWidth, newHeight;
                if (imgAspect > targetAspect) {
                    // Image is wider - fit to target width
                    newWidth = targetRes.width;
                    newHeight = targetRes.width / imgAspect;
                } else {
                    // Image is taller - fit to target height
                    newHeight = targetRes.height;
                    newWidth = targetRes.height * imgAspect;
                }
                
                canvas.width = Math.round(newWidth);
                canvas.height = Math.round(newHeight);
                
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const resolutionNames = {
                        'hd': 'HD (720p)',
                        'fullhd': 'Full HD (1080p)',
                        '2k': '2K (1440p)',
                        '4k': '4K (2160p)'
                    };
                    const fileSizeMB = (blob.size / (1024 * 1024)).toFixed(2);
                    const fileSizeKB = (blob.size / 1024).toFixed(2);
                    const sizeText = fileSizeMB >= 1 ? fileSizeMB + ' MB' : fileSizeKB + ' KB';
                    
                    document.getElementById('resultContainer').innerHTML = 
                        `<img src="${url}" class="img-fluid rounded shadow" alt="Upscaled">` +
                        `<p class="text-success mt-2 text-center"><i class="bi bi-check-circle"></i> Upscaled to ${resolutionNames[resolution]}</p>` +
                        `<p class="text-info mt-1 text-center small"><strong>Dimensions:</strong> ${canvas.width} Ã— ${canvas.height} px | <strong>Size:</strong> ${sizeText}</p>`;
                    document.getElementById('downloadBtn').href = url;
                    document.getElementById('downloadBtn').download = 'upscaled_' + resolution + '_' + canvas.width + 'x' + canvas.height + '_' + currentFile.name;
                    document.getElementById('downloadBtn').style.display = 'inline-block';
                    btn.disabled = false;
                    btn.innerHTML = 'Upscale Image';
                }, 'image/png');
            }, 2000);
        });
    </script>
</body>
</html>

